<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shinigami Strikers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Shinigami Strikers</h1>
<p>W/S (Top) • ↑/↓ (Bottom)</p>

<canvas id="game" width="900" height="300" style="border:1px solid #444"></canvas>
<p id="ui"></p>
<button onclick="restart()">Restart</button>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let speed = 5;
let gravity = 1;
let animationId;
let enemies = [];
let score1 = 0, score2 = 0;

function makePlayer(y) {
  return {
    x: 60,
    y,
    baseY: y,
    w: 26,
    h: 36,
    vy: 0,
    alive: true
  };
}

let p1 = makePlayer(114);
let p2 = makePlayer(264);

function spawnEnemy() {
  enemies.push({
    x: canvas.width,
    lane: Math.random() < 0.5 ? 0 : 1,
    flying: Math.random() < 0.4,
    w: 20,
    h: 30
  });
}

document.addEventListener("keydown", e => {
  if (e.key === "w" && p1.y === p1.baseY) p1.vy = -15;
  if (e.key === "ArrowUp" && p2.y === p2.baseY) p2.vy = -15;
});

function drawBackground() {
  ctx.fillStyle = "#ff914d";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.strokeStyle = "#00ffff";
  ctx.beginPath();
  ctx.moveTo(0,150);
  ctx.lineTo(canvas.width,150);
  ctx.stroke();
}

function update() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawBackground();

  [p1,p2].forEach(p => {
    p.vy += gravity;
    p.y += p.vy;
    if (p.y > p.baseY) {
      p.y = p.baseY;
      p.vy = 0;
    }
    ctx.fillStyle = "#111";
    ctx.fillRect(p.x,p.y,p.w,p.h);
  });

  enemies.forEach((e,i) => {
    e.x -= speed;
    const laneY = e.lane === 0 ? 114 : 264;
    const y = e.flying ? laneY - 40 : laneY;

    ctx.fillStyle = e.flying ? "yellow" : "red";
    ctx.fillRect(e.x,y,e.w,e.h);

    [[p1,0],[p2,1]].forEach(([p,l])=>{
      if(e.lane!==l) return;
      if (
        p.x < e.x + e.w &&
        p.x + p.w > e.x &&
        p.y < y + e.h &&
        p.y + p.h > y
      ) p.alive = false;
    });

    if(e.x < -30) enemies.splice(i,1);
  });

  score1++; score2++;
  document.getElementById("ui").textContent =
    `P1: ${score1} | P2: ${score2}`;

  animationId = requestAnimationFrame(update);
}

setInterval(spawnEnemy,1200);
update();

function restart() {
  enemies = [];
  score1 = score2 = 0;
  p1 = makePlayer(114);
  p2 = makePlayer(264);
}
</script>

</body>
</html>
